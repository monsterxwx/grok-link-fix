import{_ as ce}from"./index-C-WhD0Bw.js";import{c as W,y as pe,v as r,l as n,z as B,A as e,B as ae,C as U,D as C,E as Y,F as j,T as ve,r as i,o as me,w as fe,q as H,G,H as Z,I as E,J as Fe,K as q,L as Q,M as J,n as ie,N as de}from"./@vue-DAdfuQi8.js";import{d as ue}from"./dayjs-BAJkae7J.js";import"./vue-router-DWDKc87k.js";/* empty css                      */import"./pinia-sa4Af-l1.js";import"./pinia-plugin-persistedstate-zifC5664.js";import"./vue-echarts-DNGvdEIS.js";import"./echarts-DrCW8zLf.js";import"./zrender-xzpZnBn0.js";import"./tslib-BDyQ-Jie.js";const Ue=""+new URL("../../juanzhen.jpg",import.meta.url).href,De={class:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2"},ze={key:0,class:"text-amber-500"},Ne={key:1,class:"text-purple-500"},Ae={key:2,class:"text-red-500"},Te={class:"space-y-4"},He=["innerHTML"],Ee={class:"flex justify-end gap-3 mt-6"},K={__name:"Modal",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"提示"},content:{type:String,default:""},type:{type:String,default:"info"},showCancel:{type:Boolean,default:!0},showConfirm:{type:Boolean,default:!0},cancelText:{type:String,default:"取消"},confirmText:{type:String,default:"确定"},closeOnBackdrop:{type:Boolean,default:!0}},emits:["update:visible","confirm","cancel"],setup(b,{emit:k}){const y=b,w=k,S=()=>{w("update:visible",!1),w("cancel")},v=()=>{w("confirm")},a=()=>{y.closeOnBackdrop&&S()},$=W(()=>{switch(y.type){case"error":case"warning":return"bg-red-500 hover:bg-red-600";case"primary":return"bg-blue-500 hover:bg-blue-600";case"info":case"success":default:return"bg-purple-500 hover:bg-purple-600"}});return(g,f)=>(r(),pe(ve,{to:"body"},[b.visible?(r(),n("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 backdrop-blur-sm transition-opacity",onClick:a},[e("div",{class:"bg-white rounded-2xl p-6 max-w-sm w-full mx-4 relative shadow-2xl transition-transform",onClick:f[0]||(f[0]=j(()=>{},["stop"]))},[e("h3",De,[ae(g.$slots,"icon",{},()=>[b.type==="warning"?(r(),n("div",ze,[...f[1]||(f[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)])])):b.type==="info"?(r(),n("div",Ne,[...f[2]||(f[2]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])])):b.type==="error"?(r(),n("div",Ae,[...f[3]||(f[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])])):B("",!0)]),U(" "+C(b.title),1)]),e("div",Te,[ae(g.$slots,"default",{},()=>[e("p",{class:"text-slate-600 text-sm leading-relaxed",innerHTML:b.content},null,8,He)]),e("div",Ee,[b.showCancel?(r(),n("button",{key:0,onClick:S,class:"px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors text-sm"},C(b.cancelText),1)):B("",!0),b.showConfirm?(r(),n("button",{key:1,onClick:v,class:Y([$.value,"px-4 py-2 text-white rounded-lg transition-colors text-sm"])},C(b.confirmText),3)):B("",!0)])])])])):B("",!0)]))}},xe=(b,k)=>{const y=b.__vccOpts||b;for(const[w,S]of k)y[w]=S;return y},Oe={class:"history-manager bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6"},Ve={class:"flex justify-between items-center mb-1"},Re={class:"flex gap-2"},Je={class:"mb-4"},Ke={class:"flex flex-wrap gap-2"},Pe=["onClick"],Ge=["title"],Ye=["onBlur","onKeyup"],qe={class:"align-middle"},Qe={key:0,class:"pl-2 ml-1 border-l border-slate-200/50 flex items-center gap-1 shrink-0"},We=["onClick"],Xe=["onClick"],Ze=["onClick"],et={class:"space-y-3 max-h-[400px] overflow-y-auto pr-2"},tt={key:0,class:"text-center py-8 text-slate-400 text-sm"},ot={class:"flex items-center gap-3"},lt={class:"flex-1 min-w-0 w-0"},st={class:"mb-0.5"},rt=["onBlur","onKeyup"],nt=["onClick"],at=["href"],it={class:"text-[10px] text-slate-300 mt-0.5"},dt={class:"flex gap-1 shrink-0 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity"},ut=["onClick"],ct=["onClick"],pt={key:0,class:"text-slate-600"},vt={key:1,class:"text-slate-600"},mt={class:"grid grid-cols-2 gap-2 max-h-[300px] overflow-y-auto"},ft=["onClick"],xt={__name:"HistoryManager",props:{newLink:{type:String,default:""}},emits:["link-added"],setup(b,{expose:k,emit:y}){const w=b,S=y,v=i([]),a=i([]),$=i("root"),g=i(null),f=i(""),A=i(!1),D=i(""),O=i(null),V=i(null),T=i(!1),x=i(!1),l=i(!1),u=i("link"),p=i(null),c=i(!1),h=i(!1),L=i(null),M=i(""),P=i({}),z=i(!1),R=i("提示"),N=i(""),X=(s,t="提示")=>{N.value=s,R.value=t,z.value=!0},ee=W(()=>v.value.filter(s=>s.folderId===$.value)),be=W(()=>ee.value),ge=()=>{const s=localStorage.getItem("grokHistoryLinks"),t=localStorage.getItem("grokHistoryFolders");s&&(v.value=JSON.parse(s)),t?a.value=JSON.parse(t):(a.value=[{id:"default",name:"默认文件夹",createdAt:new Date().toISOString()}],F())},F=()=>{localStorage.setItem("grokHistoryLinks",JSON.stringify(v.value)),localStorage.setItem("grokHistoryFolders",JSON.stringify(a.value))},te=(s,t="未命名")=>{if(v.value.find(I=>I.url===s))return;const d=a.value.length>0?a.value[0].id:"default",m={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:t,url:s,folderId:d,createdAt:new Date().toISOString()};v.value.unshift(m),F(),S("link-added",m)},he=s=>{g.value=s.id,f.value=s.name,ie(()=>{var t,o;(t=O.value)==null||t.focus(),(o=O.value)==null||o.select()})},oe=s=>{const t=v.value.find(o=>o.id===s);t&&f.value.trim()&&(t.name=f.value.trim(),F()),g.value=null,f.value=""},ke=()=>{g.value=null,f.value=""},we=s=>{L.value=s.id,M.value=s.name,ie(()=>{const t=P.value[s.id];t&&(t.focus(),t.select())})},le=s=>{const t=a.value.find(o=>o.id===s);if(t&&M.value.trim()){const o=M.value.trim();if(a.value.find(m=>m.name===o&&m.id!==s)){X("已存在同名文件夹，请换个名字");return}t.name=o,F()}L.value=null,M.value=""},ye=()=>{L.value=null,M.value=""},se=(s,t)=>{if(u.value=s,p.value=t,s==="folder"){const o=v.value.some(d=>d.folderId===t);c.value=o}else c.value=!1;l.value=!0},Ce=()=>{u.value==="link"?v.value=v.value.filter(s=>s.id!==p.value):u.value==="folder"&&(a.value=a.value.filter(s=>s.id!==p.value),$.value===p.value&&a.value.length>0&&($.value=a.value[0].id)),F(),l.value=!1,p.value=null,c.value=!1},re=()=>{l.value=!1,p.value=null},ne=()=>{if(!D.value.trim())return;const s={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:D.value.trim(),createdAt:new Date().toISOString()};a.value.push(s),F(),A.value=!1,D.value=""},$e=s=>{$.value=s},Me=s=>{V.value=s,T.value=!0},Se=(s,t)=>{const o=v.value.find(d=>d.id===s);o&&(o.folderId=t,F(),T.value=!1,V.value=null)},Le=s=>ue(s).format("YYYY-MM-DD HH:mm"),_e=async s=>{const t=v.value.filter(m=>m.folderId===s.id);if(t.length===0){X("该文件夹为空，无法分享");return}const o=t.map(m=>{let I={u:m.url};m.name&&m.name!=="未命名"&&m.name!=="未命名链接"&&(I.n=m.name);const _=m.url.match(/post\/([a-fA-F0-9-]+)(\?|$)/);return _&&_[1]&&(I.u=_[1]),I}),d=[s.name,o];try{const{compressToEncodedURIComponent:m}=await ce(async()=>{const{compressToEncodedURIComponent:je}=await import("./lz-string-DywqlNLq.js").then(Be=>Be.l);return{compressToEncodedURIComponent:je}},[],import.meta.url),I=JSON.stringify(d),_=m(I),Ie=`${window.location.origin}${window.location.pathname}?s=${_}`;await navigator.clipboard.writeText(Ie),h.value=!0,setTimeout(()=>{h.value=!1},3e3)}catch(m){console.error("分享失败:",m),X("生成分享链接失败，请重试")}};return me(()=>{ge(),a.value.length>0&&($.value=a.value[0].id)}),fe(()=>w.newLink,(s,t)=>{s&&s!==t&&te(s)}),k({addLink:te,importSharedFolder:s=>{if(!s||!s.folderName||!Array.isArray(s.links))return!1;const t=Date.now().toString()+Math.random().toString(36).substr(2,9);let o=s.folderName;a.value.some(_=>_.name===o)&&(o=`${o} (分享导入 ${ue().format("MM-DD HH:mm")})`);const m={id:t,name:o,createdAt:new Date().toISOString()};a.value.push(m);const I=s.links.map(_=>({id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:_.name||"未命名链接",url:_.url,folderId:t,createdAt:new Date().toISOString()}));return v.value=[...I,...v.value],F(),$.value=t,!0}}),(s,t)=>(r(),n("div",Oe,[e("div",Ve,[t[15]||(t[15]=e("h2",{class:"text-lg font-bold text-slate-800 flex items-center gap-2"},[e("span",{class:"w-1 h-6 bg-purple-500 rounded-full"}),U(" 历史记录 ")],-1)),e("div",Re,[e("div",{onClick:t[0]||(t[0]=o=>x.value=!x.value),class:Y(["cursor-pointer",["p-1.5 rounded-lg transition-colors",x.value?"text-purple-600":"text-slate-400"]]),title:"管理文件夹"},[...t[13]||(t[13]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])],2),e("button",{onClick:t[1]||(t[1]=o=>A.value=!0),class:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm transition-colors flex items-center gap-1"},[...t[14]||(t[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),U(" 新建文件夹 ",-1)])])])]),e("div",Je,[e("div",Ke,[(r(!0),n(G,null,Z(a.value,o=>(r(),n("div",{key:o.id,onClick:d=>$e(o.id),class:Y(["flex items-center px-3 py-1.5 rounded-lg text-sm transition-all cursor-pointer max-w-full sm:max-w-[240px]",$.value===o.id?"bg-purple-100 text-purple-700 border border-purple-200 font-medium":"bg-white text-slate-600 border border-slate-200 shadow-sm hover:border-purple-300 hover:text-purple-600"])},[e("div",{class:"flex-1 text-left truncate",title:o.name},[L.value===o.id?q((r(),n("input",{key:0,"onUpdate:modelValue":t[2]||(t[2]=d=>M.value=d),class:"w-full text-sm font-bold text-slate-700 bg-white border border-purple-200 rounded px-1 focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500",onBlur:d=>le(o.id),onKeyup:[J(d=>le(o.id),["enter"]),J(ye,["esc"])],ref_for:!0,ref:d=>{d&&(P.value[o.id]=d)},onClick:t[3]||(t[3]=j(()=>{},["stop"]))},null,40,Ye)),[[Q,M.value]]):(r(),n(G,{key:1},[t[16]||(t[16]=e("svg",{class:"w-3 h-3 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),e("span",qe,C(o.name),1)],64))],8,Ge),x.value?(r(),n("div",Qe,[e("div",{onClick:j(d=>we(o),["stop"]),class:"text-slate-400 hover:text-green-500 transition-colors p-1",title:"重命名"},[...t[17]||(t[17]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,We),e("div",{onClick:j(d=>_e(o),["stop"]),class:"text-slate-400 hover:text-blue-500 transition-colors p-1",title:"分享文件夹"},[...t[18]||(t[18]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})],-1)])],8,Xe),e("div",{onClick:j(d=>se("folder",o.id),["stop"]),class:"text-slate-400 hover:text-red-500 transition-colors p-1",title:"删除文件夹"},[...t[19]||(t[19]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ze)])):B("",!0)],10,Pe))),128))])]),e("div",et,[ee.value.length===0?(r(),n("div",tt," 该文件夹为空 ")):B("",!0),(r(!0),n(G,null,Z(be.value,o=>(r(),n("div",{key:o.id,class:"group relative p-3 rounded-2xl hover:bg-slate-50 transition-all border border-transparent hover:border-slate-100"},[e("div",ot,[t[22]||(t[22]=e("div",{class:"w-10 h-10 rounded-full bg-purple-50 flex items-center justify-center text-purple-500 shrink-0"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})])],-1)),e("div",lt,[e("div",st,[g.value===o.id?q((r(),n("input",{key:0,"onUpdate:modelValue":t[4]||(t[4]=d=>f.value=d),class:"w-full text-sm font-bold text-slate-700 bg-white border border-purple-200 rounded px-2 py-0.5 focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500",onBlur:d=>oe(o.id),onKeyup:[J(d=>oe(o.id),["enter"]),J(ke,["esc"])],ref_for:!0,ref_key:"editInput",ref:O,onClick:t[5]||(t[5]=j(()=>{},["stop"]))},null,40,rt)),[[Q,f.value]]):(r(),n("span",{key:1,class:"block text-sm font-bold text-slate-700 truncate cursor-pointer hover:text-purple-600 transition-colors",onClick:d=>he(o)},C(o.name),9,nt))]),e("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",class:"text-xs text-slate-400 hover:text-purple-500 hover:underline truncate block transition-colors"},C(o.url),9,at),e("div",it,C(Le(o.createdAt)),1)]),e("div",dt,[e("button",{onClick:j(d=>Me(o.id),["stop"]),class:"p-1.5 text-slate-400 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",title:"移动到文件夹"},[...t[20]||(t[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])],8,ut),e("button",{onClick:j(d=>se("link",o.id),["stop"]),class:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"删除"},[...t[21]||(t[21]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ct)])])]))),128))]),H(K,{visible:A.value,"onUpdate:visible":t[7]||(t[7]=o=>A.value=o),title:"新建文件夹",type:"primary","confirm-text":"创建",onConfirm:ne},{default:E(()=>[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"文件夹名称",-1)),q(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>D.value=o),class:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"输入文件夹名称",onKeyup:J(ne,["enter"])},null,544),[[Q,D.value]])])]),_:1},8,["visible"]),H(K,{visible:l.value,"onUpdate:visible":t[8]||(t[8]=o=>l.value=o),title:c.value?"无法删除":u.value==="link"?"删除链接":"删除文件夹",type:c.value?"warning":"error","show-cancel":!c.value,"confirm-text":c.value?"知道了":"删除",onConfirm:t[9]||(t[9]=o=>c.value?re():Ce()),onCancel:re},Fe({default:E(()=>[e("div",null,[c.value?(r(),n("p",pt," 该文件夹内包含链接，请先清空或移动链接后再尝试删除。 ")):(r(),n("p",vt,C(u.value==="link"?"确定要删除这个链接吗？":"确定要删除这个文件夹吗？"),1))])]),_:2},[c.value?{name:"icon",fn:E(()=>[t[24]||(t[24]=e("div",{class:"text-amber-500"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1))]),key:"0"}:void 0]),1032,["visible","title","type","show-cancel","confirm-text"]),H(K,{visible:T.value,"onUpdate:visible":t[10]||(t[10]=o=>T.value=o),title:"移动到文件夹",type:"primary","show-confirm":!1,"cancel-text":"关闭"},{default:E(()=>[e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"选择目标文件夹",-1)),e("div",mt,[(r(!0),n(G,null,Z(a.value,o=>(r(),n("button",{key:o.id,class:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-purple-500 hover:text-white transition-colors text-sm truncate",onClick:d=>Se(V.value,o.id)},C(o.name),9,ft))),128))])])]),_:1},8,["visible"]),H(K,{visible:z.value,"onUpdate:visible":t[11]||(t[11]=o=>z.value=o),title:R.value,content:N.value,"show-cancel":!1,type:"info","confirm-text":"知道了",onConfirm:t[12]||(t[12]=o=>z.value=!1)},null,8,["visible","title","content"]),(r(),pe(ve,{to:"body"},[h.value?(r(),n("div",{key:0,class:Y(["fixed top-4 left-1/2 -translate-x-1/2 z-[9999] px-6 py-3 bg-slate-800 text-white rounded-full shadow-lg flex items-center gap-2 transition-all transform duration-300",h.value?"translate-y-0 opacity-100":"-translate-y-4 opacity-0"])},[...t[26]||(t[26]=[e("svg",{class:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),U(" 分享链接已复制到剪贴板！ ",-1)])],2)):B("",!0)]))]))}},bt=xe(xt,[["__scopeId","data-v-2f10766f"]]),gt={class:"min-h-screen bg-slate-50 relative overflow-hidden font-sans selection:bg-purple-100"},ht={class:"relative z-10 max-w-5xl mx-auto px-6 py-12"},kt={class:"grid lg:grid-cols-12 gap-8"},wt={class:"lg:col-span-8 space-y-6"},yt={class:"bg-white/70 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 md:p-8 min-h-[400px] flex flex-col transition-all"},Ct={class:"mb-6"},$t={class:"flex justify-end mb-6"},Mt={class:"flex-1"},St={key:0,class:"relative group"},Lt={class:"w-full p-4 pr-24 rounded-xl bg-purple-50 border border-purple-100 text-purple-900 break-all font-mono text-sm leading-relaxed"},_t={class:"absolute right-2 top-2 bottom-2 flex flex-col justify-center gap-2"},It={key:0},jt={key:1,class:"flex items-center gap-1"},Bt={key:1,class:"h-full min-h-[100px] flex items-center justify-center bg-slate-50 border border-dashed border-slate-200 rounded-xl text-slate-400 text-sm"},Ft={key:0},Ut={key:1,class:"text-red-400 flex items-center gap-1"},Dt={class:"lg:col-span-4 space-y-6"},zt={class:"space-y-4"},Nt={class:"p-4 bg-purple-50 rounded-xl border border-purple-100"},At={class:"font-bold text-purple-900 mb-1 flex items-center gap-2"},Tt={class:"text-sm text-purple-700"},Ht={__name:"home",setup(b){const k=i(""),y=i(!1),w=i(null),S=i(!1);i(!1);const v=i(!1),a=i(null);fe(k,()=>{y.value=!1});const $=()=>{window.open("https://link3.cc/zyshare","_blank")},g=W(()=>{if(!k.value)return"";const x=k.value.replace(/[^0-9a-fA-F]/g,"").toLowerCase();if(x.length<32)return"";let l="";for(let u=0;u<=x.length-32;u++){const p=x.substr(u,32),c=p[12],h=p[16];if(c==="4"&&["8","9","a","b"].includes(h)){l=p;break}}if(!l&&x.length>=32&&(l=x.substr(0,32)),l){const u=l.substr(0,8),p=l.substr(8,4),c=l.substr(12,4),h=l.substr(16,4),L=l.substr(20,12);return`https://grok.com/imagine/post/${`${u}-${p}-${c}-${h}-${L}`}?source=copy_link&platform=android`}return""}),f=async()=>{if(g.value)try{await navigator.clipboard.writeText(g.value),y.value=!0,setTimeout(()=>{y.value=!1},2e3)}catch(x){console.error("Copy failed",x)}},A=x=>{console.log("Link added to history:",x)},D=()=>{g.value&&(w.value&&w.value.addLink(g.value),window.open(g.value,"_blank"))},O=async()=>{const x=new URLSearchParams(window.location.search),l=x.get("shareData"),u=x.get("s");if(u)try{const{decompressFromEncodedURIComponent:p}=await ce(async()=>{const{decompressFromEncodedURIComponent:L}=await import("./lz-string-DywqlNLq.js").then(M=>M.l);return{decompressFromEncodedURIComponent:L}},[],import.meta.url),c=p(u),h=JSON.parse(c);if(Array.isArray(h)&&h.length===2){const L=h[0],P=h[1].map(R=>{let N=R.u;return/^[a-fA-F0-9-]{32,}$/.test(N)&&(N=`https://grok.com/imagine/post/${N}?source=copy_link&platform=android`),{name:R.n||"未命名",url:N}});a.value={folderName:L,links:P},v.value=!0;const z=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.replaceState({path:z},"",z)}}catch(p){console.error("解析精简分享数据失败:",p)}else if(l)try{const p=decodeURIComponent(atob(l)),c=JSON.parse(p);if(c&&c.folderName&&Array.isArray(c.links)){a.value=c,v.value=!0;const h=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.replaceState({path:h},"",h)}}catch(p){console.error("解析历史分享数据失败:",p)}},V=()=>{v.value=!1,a.value=null},T=()=>{!a.value||!w.value||(w.value.importSharedFolder&&w.value.importSharedFolder(a.value),v.value=!1,a.value=null)};return me(()=>{O()}),(x,l)=>(r(),n("div",gt,[l[19]||(l[19]=e("div",{class:"absolute inset-0 z-0 opacity-[0.4]",style:{"background-image":"radial-gradient(#cbd5e1 1px, transparent 1px)","background-size":"32px 32px"}},null,-1)),l[20]||(l[20]=e("div",{class:"absolute top-0 right-[-10%] w-[500px] h-[500px] bg-purple-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob"},null,-1)),l[21]||(l[21]=e("div",{class:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-pink-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob animation-delay-2000"},null,-1)),e("div",{onClick:$,class:"absolute top-6 right-6 z-50 cursor-pointer"},[...l[6]||(l[6]=[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg blur opacity-40 group-hover:opacity-60 transition-all duration-300"}),e("div",{class:"relative flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg shadow-md shadow-purple-500/20 hover:shadow-purple-500/30 hover:-translate-y-0.5 transition-all duration-300"},[e("span",{class:"text-white font-semibold text-xs"},"瑟瑟游戏")])],-1)])]),e("div",ht,[l[13]||(l[13]=e("div",{class:"flex flex-col items-center mb-10 text-center"},[e("h1",{class:"text-3xl md:text-4xl font-extrabold text-slate-900 mb-3"},[e("span",{class:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600"},"Grok 链接修复")]),e("p",{class:"text-slate-600"}," 剔除乱码和表情，提取核心 UUID，生成可用的 Grok 生成的视频跳转链接。 ")],-1)),e("div",kt,[e("div",wt,[e("div",yt,[e("div",Ct,[l[7]||(l[7]=e("label",{class:"block text-sm font-bold text-slate-700 mb-2 flex justify-between"},[e("span",null,"原始文本"),e("span",{class:"text-xs font-normal text-slate-400"},"支持粘贴任意包含 UUID 的乱码")],-1)),q(e("textarea",{"onUpdate:modelValue":l[0]||(l[0]=u=>k.value=u),placeholder:"粘贴你的内容，例如：看下我的8a3ae7bc-faaa...?source=...",class:"w-full h-32 p-4 rounded-xl border border-slate-200 bg-white/50 focus:bg-white focus:border-purple-500 focus:ring-4 focus:ring-purple-500/10 transition-all outline-none resize-none text-slate-700 placeholder:text-slate-400"},null,512),[[Q,k.value]])]),e("div",$t,[k.value?(r(),n("button",{key:0,onClick:l[1]||(l[1]=u=>k.value=""),class:"text-sm text-slate-400 hover:text-slate-600 mr-4"}," 清空内容 ")):B("",!0)]),e("div",Mt,[l[11]||(l[11]=e("label",{class:"block text-sm font-bold text-slate-700 mb-2"},"解析结果",-1)),g.value?(r(),n("div",St,[e("div",Lt,C(g.value),1),e("div",_t,[e("button",{onClick:f,class:"flex items-center justify-center px-3 py-1.5 bg-white border border-purple-200 shadow-sm rounded-lg text-xs font-medium text-purple-700 hover:bg-purple-600 hover:text-white hover:border-purple-600 transition-all active:scale-95"},[y.value?(r(),n("span",jt,[...l[8]||(l[8]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),U(" 已复制 ",-1)])])):(r(),n("span",It,"复制"))]),e("button",{onClick:D,class:"flex items-center justify-center px-3 py-1.5 bg-gradient-to-r from-purple-600 to-pink-600 shadow-lg shadow-purple-500/30 rounded-lg text-xs font-medium text-white hover:shadow-purple-500/50 hover:-translate-y-0.5 transition-all"},[...l[9]||(l[9]=[U(" 跳转 ",-1),e("svg",{class:"w-3 h-3 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h4m10 0h-4a2 2 0 00-2-2V8a2 2 0 002-2h4M6 6m0 0h12v12H6V6z"})],-1)])])])])):(r(),n("div",Bt,[k.value?(r(),n("span",Ut,[...l[10]||(l[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),U(" 未检测到有效的 UUID 格式 ",-1)])])):(r(),n("span",Ft,"等待输入..."))]))])])]),e("div",Dt,[H(bt,{ref_key:"historyManagerRef",ref:w,"new-link":g.value,onLinkAdded:A},null,8,["new-link"]),l[12]||(l[12]=de('<div class="bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 sticky top-8" data-v-6d04d882><h2 class="text-lg font-bold text-slate-800 mb-6 flex items-center gap-2" data-v-6d04d882><span class="w-1 h-6 bg-purple-500 rounded-full" data-v-6d04d882></span> 工具说明 </h2><div class="space-y-4 text-sm text-slate-600 leading-relaxed" data-v-6d04d882><p data-v-6d04d882> 本工具用于修复多余内容的 Grok 链接。 </p><div class="bg-blue-50 p-4 rounded-xl border border-blue-100" data-v-6d04d882><p class="font-bold text-blue-800 mb-2" data-v-6d04d882> 识别规则： </p><p data-v-6d04d882>我们会扫描文本中符合 <code class="bg-white px-1 py-0.5 rounded border border-blue-200 text-blue-600 text-xs" data-v-6d04d882>8-4-4-4-12</code> 格式的 UUID 字符串。</p></div><div data-v-6d04d882><p class="font-medium text-slate-800 mb-2" data-v-6d04d882> 示例输入： </p><div class="bg-slate-100 p-2 rounded text-xs text-slate-500 break-all" data-v-6d04d882> 看下我的8a3ae7bc-faaa-4100-aa82-13939d7ef2b8?source=copy_link </div></div><div class="flex justify-center pt-2" data-v-6d04d882><svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-6d04d882><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" data-v-6d04d882></path></svg></div><div data-v-6d04d882><p class="font-medium text-slate-800 mb-2" data-v-6d04d882> 标准输出： </p><div class="bg-purple-50 p-2 rounded text-xs text-purple-600 break-all border border-purple-100" data-v-6d04d882> https://grok.com/imagine/post/8a3ae7bc-faaa-4100-aa82-13939d7ef2b8... </div></div></div></div>',1))])])]),S.value?(r(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",onClick:l[4]||(l[4]=u=>S.value=!1)},[e("div",{class:"bg-white rounded-2xl p-8 max-w-sm mx-4 relative shadow-2xl",onClick:l[3]||(l[3]=j(()=>{},["stop"]))},[e("button",{onClick:l[2]||(l[2]=u=>S.value=!1),class:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-all"},[...l[14]||(l[14]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),l[15]||(l[15]=de('<div class="text-center" data-v-6d04d882><div class="text-3xl mb-2" data-v-6d04d882> ☕️ </div><h3 class="text-lg font-bold text-gray-800 mb-2" data-v-6d04d882> 感谢您的支持！ </h3><div class="bg-gray-50 rounded-xl mb-4" data-v-6d04d882><div class="w-48 mx-auto bg-white rounded-lg border-2 border-gray-200 flex items-center justify-center overflow-hidden" data-v-6d04d882><img src="'+Ue+'" alt="支付宝收款码" class="w-full h-full object-cover" data-v-6d04d882></div></div><p class="text-xs text-gray-400" data-v-6d04d882> 您的支持是我继续开发的动力！ </p></div>',1))])])):B("",!0),H(K,{visible:v.value,"onUpdate:visible":l[5]||(l[5]=u=>v.value=u),title:"发现分享的文件夹",type:"primary","confirm-text":"确定导入",onConfirm:T,onCancel:V,"close-on-backdrop":!1},{icon:E(()=>[...l[16]||(l[16]=[e("div",{class:"text-purple-500"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])],-1)])]),default:E(()=>{var u,p,c;return[e("div",zt,[e("div",Nt,[e("p",At,[l[17]||(l[17]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),U(" "+C((u=a.value)==null?void 0:u.folderName),1)]),e("p",Tt," 包含 "+C(((c=(p=a.value)==null?void 0:p.links)==null?void 0:c.length)||0)+" 个链接 ",1)]),l[18]||(l[18]=e("p",{class:"text-slate-600 text-sm"}," 是否将该文件夹及其包含的链接保存到您的本地历史记录中？ ",-1))])]}),_:1},8,["visible"])]))}},Xt=xe(Ht,[["__scopeId","data-v-6d04d882"]]);export{Xt as default};
