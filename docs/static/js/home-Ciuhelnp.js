import{_ as xe}from"./index-vM-AbGGk.js";import{c as te,y as he,v as n,l as i,z as D,A as e,B as ve,C as T,D as M,E as X,F as U,T as ge,r,o as ke,w as we,q as V,G as W,H as ne,I as z,J as Oe,K as Z,L as ee,M as q,n as me,N as Re,O as fe}from"./@vue-DPjZmLUw.js";import{d as be}from"./dayjs-BAJkae7J.js";import"./vue-router-BnouAuHk.js";/* empty css                      */import"./pinia-Cyr-9YV6.js";import"./pinia-plugin-persistedstate-zifC5664.js";import"./vue-echarts-C1lPldia.js";import"./echarts-DrCW8zLf.js";import"./zrender-xzpZnBn0.js";import"./tslib-BDyQ-Jie.js";const Je=""+new URL("../../juanzhen.jpg",import.meta.url).href,Ke={class:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2"},Pe={key:0,class:"text-amber-500"},Ge={key:1,class:"text-purple-500"},Ye={key:2,class:"text-red-500"},qe={class:"space-y-4"},Qe=["innerHTML"],We={class:"flex justify-end gap-3 mt-6"},P={__name:"Modal",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"提示"},content:{type:String,default:""},type:{type:String,default:"info"},showCancel:{type:Boolean,default:!0},showConfirm:{type:Boolean,default:!0},cancelText:{type:String,default:"取消"},confirmText:{type:String,default:"确定"},closeOnBackdrop:{type:Boolean,default:!0}},emits:["update:visible","confirm","cancel"],setup(x,{emit:h}){const S=x,w=h,I=()=>{w("update:visible",!1),w("cancel")},v=()=>{w("confirm")},d=()=>{S.closeOnBackdrop&&I()},g=te(()=>{switch(S.type){case"error":case"warning":return"bg-red-500 hover:bg-red-600";case"primary":return"bg-blue-500 hover:bg-blue-600";case"info":case"success":default:return"bg-purple-500 hover:bg-purple-600"}});return($,f)=>(n(),he(ge,{to:"body"},[x.visible?(n(),i("div",{key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 backdrop-blur-sm transition-opacity",onClick:d},[e("div",{class:"bg-white rounded-2xl p-6 max-w-sm w-full mx-4 relative shadow-2xl transition-transform",onClick:f[0]||(f[0]=U(()=>{},["stop"]))},[e("h3",Ke,[ve($.$slots,"icon",{},()=>[x.type==="warning"?(n(),i("div",Pe,[...f[1]||(f[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)])])):x.type==="info"?(n(),i("div",Ge,[...f[2]||(f[2]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])])):x.type==="error"?(n(),i("div",Ye,[...f[3]||(f[3]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])])):D("",!0)]),T(" "+M(x.title),1)]),e("div",qe,[ve($.$slots,"default",{},()=>[e("p",{class:"text-slate-600 text-sm leading-relaxed",innerHTML:x.content},null,8,Qe)]),e("div",We,[x.showCancel?(n(),i("button",{key:0,onClick:I,class:"px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors text-sm"},M(x.cancelText),1)):D("",!0),x.showConfirm?(n(),i("button",{key:1,onClick:v,class:X([g.value,"px-4 py-2 text-white rounded-lg transition-colors text-sm"])},M(x.confirmText),3)):D("",!0)])])])])):D("",!0)]))}},ye=(x,h)=>{const S=x.__vccOpts||x;for(const[w,I]of h)S[w]=I;return S},Xe={class:"history-manager bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6"},Ze={class:"flex justify-between items-center mb-1"},et={class:"flex gap-2"},tt={class:"mb-4"},ot={class:"flex flex-wrap gap-2"},lt=["onClick"],st=["title"],at=["onBlur","onKeyup"],nt={class:"align-middle"},rt={key:0,class:"pl-2 ml-1 border-l border-slate-200/50 flex items-center gap-1 shrink-0"},it=["onClick"],dt=["onClick"],ut=["onClick"],ct={class:"space-y-3 max-h-[400px] overflow-y-auto pr-2"},pt={key:0,class:"text-center py-8 text-slate-400 text-sm"},vt={class:"flex items-center gap-3"},mt={class:"flex-1 min-w-0 w-0"},ft={class:"mb-0.5"},bt=["onBlur","onKeyup"],xt=["onClick"],ht=["href"],gt={class:"text-[10px] text-slate-300 mt-0.5"},kt={class:"flex gap-1 shrink-0 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity"},wt=["onClick"],yt=["onClick"],Ct=["onClick"],$t={key:0,class:"text-slate-600"},Mt={key:1,class:"text-slate-600"},St={class:"grid grid-cols-2 gap-2 max-h-[300px] overflow-y-auto"},Lt=["onClick"],Ft={__name:"HistoryManager",props:{newLink:{type:String,default:""}},emits:["link-added"],setup(x,{expose:h,emit:S}){const w=x,I=S,v=r([]),d=r([]),g=r("root"),$=r(null),f=r(""),O=r(!1),y=r(""),G=r(null),Y=r(null),R=r(!1),J=r(!1),N=r(!1),H=r("link"),B=r(null),L=r(!1),A=r(!1),u=r(null),o=r(""),c=r({}),p=r(!1),b=r("提示"),C=r(""),j=(s,t="提示")=>{C.value=s,b.value=t,p.value=!0},K=te(()=>v.value.filter(s=>s.folderId===g.value)),oe=te(()=>K.value),Q=()=>{const s=localStorage.getItem("grokHistoryLinks"),t=localStorage.getItem("grokHistoryFolders");s&&(v.value=JSON.parse(s)),t?d.value=JSON.parse(t):(d.value=[{id:"default",name:"默认文件夹",createdAt:new Date().toISOString()}],_())},_=()=>{localStorage.setItem("grokHistoryLinks",JSON.stringify(v.value)),localStorage.setItem("grokHistoryFolders",JSON.stringify(d.value))},E=(s,t="未命名")=>{if(v.value.find(k=>k.url===s))return;const a=d.value.length>0?d.value[0].id:"default",m={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:t,url:s,folderId:a,createdAt:new Date().toISOString()};v.value.unshift(m),_(),I("link-added",m)},Ce=s=>{$.value=s.id,f.value=s.name,me(()=>{var t,l;(t=G.value)==null||t.focus(),(l=G.value)==null||l.select()})},re=s=>{const t=v.value.find(l=>l.id===s);t&&f.value.trim()&&(t.name=f.value.trim(),_()),$.value=null,f.value=""},$e=()=>{$.value=null,f.value=""},Me=s=>{u.value=s.id,o.value=s.name,me(()=>{const t=c.value[s.id];t&&(t.focus(),t.select())})},ie=s=>{const t=d.value.find(l=>l.id===s);if(t&&o.value.trim()){const l=o.value.trim();if(d.value.find(m=>m.name===l&&m.id!==s)){j("已存在同名文件夹，请换个名字");return}t.name=l,_()}u.value=null,o.value=""},Se=()=>{u.value=null,o.value=""},de=(s,t)=>{if(H.value=s,B.value=t,s==="folder"){const l=v.value.some(a=>a.folderId===t);L.value=l}else L.value=!1;N.value=!0},Le=()=>{H.value==="link"?v.value=v.value.filter(s=>s.id!==B.value):H.value==="folder"&&(d.value=d.value.filter(s=>s.id!==B.value),g.value===B.value&&d.value.length>0&&(g.value=d.value[0].id)),_(),N.value=!1,B.value=null,L.value=!1},ue=()=>{N.value=!1,B.value=null},ce=()=>{if(!y.value.trim())return;const s={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:y.value.trim(),createdAt:new Date().toISOString()};d.value.push(s),_(),O.value=!1,y.value=""},Fe=s=>{g.value=s},Ie=s=>{Y.value=s,R.value=!0},je=(s,t)=>{const l=v.value.find(a=>a.id===s);l&&(l.folderId=t,_(),R.value=!1,Y.value=null)},_e=s=>be(s).format("YYYY-MM-DD HH:mm"),Be=async s=>{const t=v.value.filter(m=>m.folderId===s.id);if(t.length===0){j("该文件夹为空，无法分享");return}const l=t.map(m=>{let k={u:m.url};m.name&&m.name!=="未命名"&&m.name!=="未命名链接"&&(k.n=m.name);const F=m.url.match(/post\/([a-fA-F0-9-]+)(\?|$)/);return F&&F[1]&&(k.u=F[1]),k}),a=[s.name,l];try{const{compressToEncodedURIComponent:m}=await xe(async()=>{const{compressToEncodedURIComponent:se}=await import("./lz-string-DywqlNLq.js").then(ae=>ae.l);return{compressToEncodedURIComponent:se}},[],import.meta.url),k=JSON.stringify(a),F=m(k),le=`${window.location.origin}${window.location.pathname}?s=${F}`;await navigator.clipboard.writeText(le),A.value=!0,setTimeout(()=>{A.value=!1},3e3)}catch(m){console.error("分享失败:",m),j("生成分享链接失败，请重试")}},Ue=async s=>{try{const t=s.url.match(/([a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12})/);let l="";if(t)l=t[1];else{const pe=s.url.match(/([a-fA-F0-9]{32})/);pe&&(l=pe[1])}if(!l){j("无法提取有效的 UUID 进行分享");return}const a=l.replace(/-/g,""),m=["✦","✨","❀","✿","✾","❁","❄","★","☆","♥","♡","♪","♫","☼","☀","☁","☂","☃","☄"],k=()=>m[Math.floor(Math.random()*m.length)],F=a.substr(0,8),le=a.substr(8,4),se=a.substr(12,4),ae=a.substr(16,4),De=a.substr(20,12),Ae=k(),Te=k(),ze=k(),Ne=k(),He=k(),Ee=k(),Ve=`看我生成的绝妙内容${`${Ae}${F}${Te}${le}${ze}${se}${Ne}${ae}${He}${De}${Ee}`}复制这段话打开#Grok链接补全#工具即可直接查看！`;await navigator.clipboard.writeText(Ve),A.value=!0,setTimeout(()=>{A.value=!1},3e3)}catch(t){console.error("防吞分享失败:",t),j("生成分享口令失败，请重试")}};return ke(()=>{Q(),d.value.length>0&&(g.value=d.value[0].id)}),we(()=>w.newLink,(s,t)=>{s&&s!==t&&E(s)}),h({addLink:E,importSharedFolder:s=>{if(!s||!s.folderName||!Array.isArray(s.links))return!1;const t=Date.now().toString()+Math.random().toString(36).substr(2,9);let l=s.folderName;d.value.some(F=>F.name===l)&&(l=`${l} (分享导入 ${be().format("MM-DD HH:mm")})`);const m={id:t,name:l,createdAt:new Date().toISOString()};d.value.push(m);const k=s.links.map(F=>({id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:F.name||"未命名链接",url:F.url,folderId:t,createdAt:new Date().toISOString()}));return v.value=[...k,...v.value],_(),g.value=t,!0}}),(s,t)=>(n(),i("div",Xe,[e("div",Ze,[t[15]||(t[15]=e("h2",{class:"text-lg font-bold text-slate-800 flex items-center gap-2"},[e("span",{class:"w-1 h-6 bg-purple-500 rounded-full"}),T(" 历史记录 ")],-1)),e("div",et,[e("div",{onClick:t[0]||(t[0]=l=>J.value=!J.value),class:X(["cursor-pointer",["p-1.5 rounded-lg transition-colors",J.value?"text-purple-600":"text-slate-400"]]),title:"管理文件夹"},[...t[13]||(t[13]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])],2),e("button",{onClick:t[1]||(t[1]=l=>O.value=!0),class:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm transition-colors flex items-center gap-1"},[...t[14]||(t[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),T(" 新建文件夹 ",-1)])])])]),e("div",tt,[e("div",ot,[(n(!0),i(W,null,ne(d.value,l=>(n(),i("div",{key:l.id,onClick:a=>Fe(l.id),class:X(["flex items-center px-3 py-1.5 rounded-lg text-sm transition-all cursor-pointer max-w-full sm:max-w-[240px]",g.value===l.id?"bg-purple-100 text-purple-700 border border-purple-200 font-medium":"bg-white text-slate-600 border border-slate-200 shadow-sm hover:border-purple-300 hover:text-purple-600"])},[e("div",{class:"flex-1 text-left truncate",title:l.name},[u.value===l.id?Z((n(),i("input",{key:0,"onUpdate:modelValue":t[2]||(t[2]=a=>o.value=a),class:"w-full text-sm font-bold text-slate-700 bg-white border border-purple-200 rounded px-1 focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500",onBlur:a=>ie(l.id),onKeyup:[q(a=>ie(l.id),["enter"]),q(Se,["esc"])],ref_for:!0,ref:a=>{a&&(c.value[l.id]=a)},onClick:t[3]||(t[3]=U(()=>{},["stop"]))},null,40,at)),[[ee,o.value]]):(n(),i(W,{key:1},[t[16]||(t[16]=e("svg",{class:"w-3 h-3 inline mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),e("span",nt,M(l.name),1)],64))],8,st),J.value?(n(),i("div",rt,[e("div",{onClick:U(a=>Me(l),["stop"]),class:"text-slate-400 hover:text-green-500 transition-colors p-1",title:"重命名"},[...t[17]||(t[17]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,it),e("div",{onClick:U(a=>Be(l),["stop"]),class:"text-slate-400 hover:text-blue-500 transition-colors p-1",title:"分享文件夹"},[...t[18]||(t[18]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})],-1)])],8,dt),e("div",{onClick:U(a=>de("folder",l.id),["stop"]),class:"text-slate-400 hover:text-red-500 transition-colors p-1",title:"删除文件夹"},[...t[19]||(t[19]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ut)])):D("",!0)],10,lt))),128))])]),e("div",ct,[K.value.length===0?(n(),i("div",pt," 该文件夹为空 ")):D("",!0),(n(!0),i(W,null,ne(oe.value,l=>(n(),i("div",{key:l.id,class:"group relative p-3 rounded-2xl hover:bg-slate-50 transition-all border border-transparent hover:border-slate-100"},[e("div",vt,[t[23]||(t[23]=e("div",{class:"w-10 h-10 rounded-full bg-purple-50 flex items-center justify-center text-purple-500 shrink-0"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})])],-1)),e("div",mt,[e("div",ft,[$.value===l.id?Z((n(),i("input",{key:0,"onUpdate:modelValue":t[4]||(t[4]=a=>f.value=a),class:"w-full text-sm font-bold text-slate-700 bg-white border border-purple-200 rounded px-2 py-0.5 focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500",onBlur:a=>re(l.id),onKeyup:[q(a=>re(l.id),["enter"]),q($e,["esc"])],ref_for:!0,ref_key:"editInput",ref:G,onClick:t[5]||(t[5]=U(()=>{},["stop"]))},null,40,bt)),[[ee,f.value]]):(n(),i("span",{key:1,class:"block text-sm font-bold text-slate-700 truncate cursor-pointer hover:text-purple-600 transition-colors",onClick:a=>Ce(l)},M(l.name),9,xt))]),e("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",class:"text-xs text-slate-400 hover:text-purple-500 hover:underline truncate block transition-colors"},M(l.url),9,ht),e("div",gt,M(_e(l.createdAt)),1)]),e("div",kt,[e("button",{onClick:U(a=>Ue(l),["stop"]),class:"p-1.5 text-slate-400 hover:text-green-500 hover:bg-green-50 rounded-lg transition-colors",title:"生成防吞分享口令"},[...t[20]||(t[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})],-1)])],8,wt),e("button",{onClick:U(a=>Ie(l.id),["stop"]),class:"p-1.5 text-slate-400 hover:text-blue-500 hover:bg-blue-50 rounded-lg transition-colors",title:"移动到文件夹"},[...t[21]||(t[21]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])],8,yt),e("button",{onClick:U(a=>de("link",l.id),["stop"]),class:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"删除"},[...t[22]||(t[22]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ct)])])]))),128))]),V(P,{visible:O.value,"onUpdate:visible":t[7]||(t[7]=l=>O.value=l),title:"新建文件夹",type:"primary","confirm-text":"创建",onConfirm:ce},{default:z(()=>[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"文件夹名称",-1)),Z(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>y.value=l),class:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"输入文件夹名称",onKeyup:q(ce,["enter"])},null,544),[[ee,y.value]])])]),_:1},8,["visible"]),V(P,{visible:N.value,"onUpdate:visible":t[8]||(t[8]=l=>N.value=l),title:L.value?"无法删除":H.value==="link"?"删除链接":"删除文件夹",type:L.value?"warning":"error","show-cancel":!L.value,"confirm-text":L.value?"知道了":"删除",onConfirm:t[9]||(t[9]=l=>L.value?ue():Le()),onCancel:ue},Oe({default:z(()=>[e("div",null,[L.value?(n(),i("p",$t," 该文件夹内包含链接，请先清空或移动链接后再尝试删除。 ")):(n(),i("p",Mt,M(H.value==="link"?"确定要删除这个链接吗？":"确定要删除这个文件夹吗？"),1))])]),_:2},[L.value?{name:"icon",fn:z(()=>[t[25]||(t[25]=e("div",{class:"text-amber-500"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1))]),key:"0"}:void 0]),1032,["visible","title","type","show-cancel","confirm-text"]),V(P,{visible:R.value,"onUpdate:visible":t[10]||(t[10]=l=>R.value=l),title:"移动到文件夹",type:"primary","show-confirm":!1,"cancel-text":"关闭"},{default:z(()=>[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"选择目标文件夹",-1)),e("div",St,[(n(!0),i(W,null,ne(d.value,l=>(n(),i("button",{key:l.id,class:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-purple-500 hover:text-white transition-colors text-sm truncate",onClick:a=>je(Y.value,l.id)},M(l.name),9,Lt))),128))])])]),_:1},8,["visible"]),V(P,{visible:p.value,"onUpdate:visible":t[11]||(t[11]=l=>p.value=l),title:b.value,content:C.value,"show-cancel":!1,type:"info","confirm-text":"知道了",onConfirm:t[12]||(t[12]=l=>p.value=!1)},null,8,["visible","title","content"]),(n(),he(ge,{to:"body"},[A.value?(n(),i("div",{key:0,class:X(["fixed top-4 left-1/2 -translate-x-1/2 z-[9999] px-6 py-3 bg-slate-800 text-white rounded-full shadow-lg flex items-center gap-2 transition-all transform duration-300",A.value?"translate-y-0 opacity-100":"-translate-y-4 opacity-0"])},[...t[27]||(t[27]=[e("svg",{class:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),T(" 分享内容已复制到剪贴板！ ",-1)])],2)):D("",!0)]))]))}},It=ye(Ft,[["__scopeId","data-v-95d99412"]]),jt={class:"min-h-screen bg-slate-50 relative overflow-hidden font-sans selection:bg-purple-100"},_t={class:"relative z-10 max-w-5xl mx-auto px-6 py-12"},Bt={class:"grid lg:grid-cols-12 gap-8"},Ut={class:"lg:col-span-8 space-y-6"},Dt={class:"bg-white/70 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 md:p-8 min-h-[400px] flex flex-col transition-all"},At={class:"mb-6"},Tt={class:"flex justify-end mb-6"},zt={class:"flex-1"},Nt={key:0,class:"relative group"},Ht={class:"w-full p-4 pr-24 rounded-xl bg-purple-50 border border-purple-100 text-purple-900 break-all font-mono text-sm leading-relaxed"},Et={class:"absolute right-2 top-2 bottom-2 flex flex-col justify-center gap-2"},Vt={key:0},Ot={key:1,class:"flex items-center gap-1"},Rt={key:1,class:"h-full min-h-[100px] flex items-center justify-center bg-slate-50 border border-dashed border-slate-200 rounded-xl text-slate-400 text-sm"},Jt={key:0},Kt={key:1,class:"text-red-400 flex items-center gap-1"},Pt={class:"lg:col-span-4 space-y-6"},Gt={class:"space-y-4"},Yt={class:"p-4 bg-purple-50 rounded-xl border border-purple-100"},qt={class:"font-bold text-purple-900 mb-1 flex items-center gap-2"},Qt={class:"text-sm text-purple-700"},Wt={class:"space-y-4"},Xt={class:"p-3 bg-slate-50 rounded-lg border border-slate-200 text-xs text-slate-500 break-all max-h-24 overflow-y-auto line-clamp-3"},Zt={__name:"home",setup(x){const h=r(""),S=r(!1),w=r(null),I=r(!1);r(!1);const v=r(!1),d=r(null),g=r(!1),$=r(""),f=r("");we(h,()=>{S.value=!1});const O=()=>{window.open("https://link3.cc/zyshare","_blank")},y=te(()=>{if(!h.value)return"";const u=h.value.replace(/[^0-9a-fA-F]/g,"").toLowerCase();if(u.length<32)return"";let o="";for(let c=0;c<=u.length-32;c++){const p=u.substr(c,32),b=p[12],C=p[16];if(b==="4"&&["8","9","a","b"].includes(C)){o=p;break}}if(!o&&u.length>=32&&(o=u.substr(0,32)),o){const c=o.substr(0,8),p=o.substr(8,4),b=o.substr(12,4),C=o.substr(16,4),j=o.substr(20,12);return`https://grok.com/imagine/post/${`${c}-${p}-${b}-${C}-${j}`}?source=copy_link&platform=android`}return""}),G=async()=>{if(y.value)try{await navigator.clipboard.writeText(y.value),S.value=!0,setTimeout(()=>{S.value=!1},2e3)}catch(u){console.error("Copy failed",u)}},Y=u=>{console.log("Link added to history:",u)},R=()=>{y.value&&(w.value&&w.value.addLink(y.value),window.open(y.value,"_blank"))},J=async()=>{const u=new URLSearchParams(window.location.search),o=u.get("shareData"),c=u.get("s");if(c)try{const{decompressFromEncodedURIComponent:p}=await xe(async()=>{const{decompressFromEncodedURIComponent:j}=await import("./lz-string-DywqlNLq.js").then(K=>K.l);return{decompressFromEncodedURIComponent:j}},[],import.meta.url),b=p(c),C=JSON.parse(b);if(Array.isArray(C)&&C.length===2){const j=C[0],oe=C[1].map(_=>{let E=_.u;return/^[a-fA-F0-9-]{32,}$/.test(E)&&(E=`https://grok.com/imagine/post/${E}?source=copy_link&platform=android`),{name:_.n||"未命名",url:E}});d.value={folderName:j,links:oe},v.value=!0;const Q=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.replaceState({path:Q},"",Q)}}catch(p){console.error("解析精简分享数据失败:",p)}else if(o)try{const p=decodeURIComponent(atob(o)),b=JSON.parse(p);if(b&&b.folderName&&Array.isArray(b.links)){d.value=b,v.value=!0;const C=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.replaceState({path:C},"",C)}}catch(p){console.error("解析历史分享数据失败:",p)}},N=()=>{v.value=!1,d.value=null},H=()=>{!d.value||!w.value||(w.value.importSharedFolder&&w.value.importSharedFolder(d.value),v.value=!1,d.value=null)},B=async()=>{if(!(v.value||g.value||I.value))try{const u=await navigator.clipboard.readText();if(!u||u===f.value||u===h.value)return;const o=u.replace(/[^0-9a-fA-F]/g,"").toLowerCase();if(o.length<32){f.value=u;return}let c=!1;for(let p=0;p<=o.length-32;p++){const b=o.substr(p,32);if(b[12]==="4"&&["8","9","a","b"].includes(b[16])){c=!0;break}}!c&&o.length>=32&&(c=!0),c?($.value=u,g.value=!0):f.value=u}catch(u){console.debug("读取剪贴板失败，可能是权限未授予:",u)}},L=()=>{h.value="",setTimeout(()=>{h.value=$.value},50),f.value=$.value,g.value=!1},A=()=>{f.value=$.value,g.value=!1};return ke(()=>{J(),window.addEventListener("focus",B),setTimeout(B,500)}),Re(()=>{window.removeEventListener("focus",B)}),(u,o)=>(n(),i("div",jt,[o[22]||(o[22]=e("div",{class:"absolute inset-0 z-0 opacity-[0.4]",style:{"background-image":"radial-gradient(#cbd5e1 1px, transparent 1px)","background-size":"32px 32px"}},null,-1)),o[23]||(o[23]=e("div",{class:"absolute top-0 right-[-10%] w-[500px] h-[500px] bg-purple-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob"},null,-1)),o[24]||(o[24]=e("div",{class:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-pink-300 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-blob animation-delay-2000"},null,-1)),e("div",{onClick:O,class:"absolute top-6 right-6 z-50 cursor-pointer"},[...o[7]||(o[7]=[e("div",{class:"relative"},[e("div",{class:"absolute inset-0 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg blur opacity-40 group-hover:opacity-60 transition-all duration-300"}),e("div",{class:"relative flex items-center gap-2 px-3 py-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg shadow-md shadow-purple-500/20 hover:shadow-purple-500/30 hover:-translate-y-0.5 transition-all duration-300"},[e("span",{class:"text-white font-semibold text-xs"},"瑟瑟游戏")])],-1)])]),e("div",_t,[o[14]||(o[14]=e("div",{class:"flex flex-col items-center mb-10 text-center"},[e("h1",{class:"text-3xl md:text-4xl font-extrabold text-slate-900 mb-3"},[e("span",{class:"text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600"},"Grok 链接修复")]),e("p",{class:"text-slate-600"}," 剔除乱码和表情，提取核心 UUID，生成可用的 Grok 生成的视频跳转链接。 ")],-1)),e("div",Bt,[e("div",Ut,[e("div",Dt,[e("div",At,[o[8]||(o[8]=e("label",{class:"block text-sm font-bold text-slate-700 mb-2 flex justify-between"},[e("span",null,"原始文本"),e("span",{class:"text-xs font-normal text-slate-400"},"支持粘贴任意包含 UUID 的乱码")],-1)),Z(e("textarea",{"onUpdate:modelValue":o[0]||(o[0]=c=>h.value=c),placeholder:"粘贴你的内容，例如：看下我的8a3ae7bc-faaa...?source=...",class:"w-full h-32 p-4 rounded-xl border border-slate-200 bg-white/50 focus:bg-white focus:border-purple-500 focus:ring-4 focus:ring-purple-500/10 transition-all outline-none resize-none text-slate-700 placeholder:text-slate-400"},null,512),[[ee,h.value]])]),e("div",Tt,[h.value?(n(),i("button",{key:0,onClick:o[1]||(o[1]=c=>h.value=""),class:"text-sm text-slate-400 hover:text-slate-600 mr-4"}," 清空内容 ")):D("",!0)]),e("div",zt,[o[12]||(o[12]=e("label",{class:"block text-sm font-bold text-slate-700 mb-2"},"解析结果",-1)),y.value?(n(),i("div",Nt,[e("div",Ht,M(y.value),1),e("div",Et,[e("button",{onClick:G,class:"flex items-center justify-center px-3 py-1.5 bg-white border border-purple-200 shadow-sm rounded-lg text-xs font-medium text-purple-700 hover:bg-purple-600 hover:text-white hover:border-purple-600 transition-all active:scale-95"},[S.value?(n(),i("span",Ot,[...o[9]||(o[9]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),T(" 已复制 ",-1)])])):(n(),i("span",Vt,"复制"))]),e("button",{onClick:R,class:"flex items-center justify-center px-3 py-1.5 bg-gradient-to-r from-purple-600 to-pink-600 shadow-lg shadow-purple-500/30 rounded-lg text-xs font-medium text-white hover:shadow-purple-500/50 hover:-translate-y-0.5 transition-all"},[...o[10]||(o[10]=[T(" 跳转 ",-1),e("svg",{class:"w-3 h-3 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h4m10 0h-4a2 2 0 00-2-2V8a2 2 0 002-2h4M6 6m0 0h12v12H6V6z"})],-1)])])])])):(n(),i("div",Rt,[h.value?(n(),i("span",Kt,[...o[11]||(o[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),T(" 未检测到有效的 UUID 格式 ",-1)])])):(n(),i("span",Jt,"等待输入..."))]))])])]),e("div",Pt,[V(It,{ref_key:"historyManagerRef",ref:w,"new-link":y.value,onLinkAdded:Y},null,8,["new-link"]),o[13]||(o[13]=fe('<div class="bg-white/80 backdrop-blur-xl rounded-3xl shadow-xl border border-white/50 p-6 sticky top-8" data-v-28ba7ae0><h2 class="text-lg font-bold text-slate-800 mb-6 flex items-center gap-2" data-v-28ba7ae0><span class="w-1 h-6 bg-purple-500 rounded-full" data-v-28ba7ae0></span> 工具说明 </h2><div class="space-y-4 text-sm text-slate-600 leading-relaxed" data-v-28ba7ae0><p data-v-28ba7ae0> 本工具用于修复多余内容的 Grok 链接。 </p><div class="bg-blue-50 p-4 rounded-xl border border-blue-100" data-v-28ba7ae0><p class="font-bold text-blue-800 mb-2" data-v-28ba7ae0> 识别规则： </p><p data-v-28ba7ae0>我们会扫描文本中符合 <code class="bg-white px-1 py-0.5 rounded border border-blue-200 text-blue-600 text-xs" data-v-28ba7ae0>8-4-4-4-12</code> 格式的 UUID 字符串。</p></div><div data-v-28ba7ae0><p class="font-medium text-slate-800 mb-2" data-v-28ba7ae0> 示例输入： </p><div class="bg-slate-100 p-2 rounded text-xs text-slate-500 break-all" data-v-28ba7ae0> 看下我的8a3ae7bc-faaa-4100-aa82-13939d7ef2b8?source=copy_link </div></div><div class="flex justify-center pt-2" data-v-28ba7ae0><svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-28ba7ae0><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" data-v-28ba7ae0></path></svg></div><div data-v-28ba7ae0><p class="font-medium text-slate-800 mb-2" data-v-28ba7ae0> 标准输出： </p><div class="bg-purple-50 p-2 rounded text-xs text-purple-600 break-all border border-purple-100" data-v-28ba7ae0> https://grok.com/imagine/post/8a3ae7bc-faaa-4100-aa82-13939d7ef2b8... </div></div></div></div>',1))])])]),I.value?(n(),i("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",onClick:o[4]||(o[4]=c=>I.value=!1)},[e("div",{class:"bg-white rounded-2xl p-8 max-w-sm mx-4 relative shadow-2xl",onClick:o[3]||(o[3]=U(()=>{},["stop"]))},[e("button",{onClick:o[2]||(o[2]=c=>I.value=!1),class:"absolute top-4 right-4 w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 transition-all"},[...o[15]||(o[15]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),o[16]||(o[16]=fe('<div class="text-center" data-v-28ba7ae0><div class="text-3xl mb-2" data-v-28ba7ae0> ☕️ </div><h3 class="text-lg font-bold text-gray-800 mb-2" data-v-28ba7ae0> 感谢您的支持！ </h3><div class="bg-gray-50 rounded-xl mb-4" data-v-28ba7ae0><div class="w-48 mx-auto bg-white rounded-lg border-2 border-gray-200 flex items-center justify-center overflow-hidden" data-v-28ba7ae0><img src="'+Je+'" alt="支付宝收款码" class="w-full h-full object-cover" data-v-28ba7ae0></div></div><p class="text-xs text-gray-400" data-v-28ba7ae0> 您的支持是我继续开发的动力！ </p></div>',1))])])):D("",!0),V(P,{visible:v.value,"onUpdate:visible":o[5]||(o[5]=c=>v.value=c),title:"发现分享的文件夹",type:"primary","confirm-text":"确定导入",onConfirm:H,onCancel:N,"close-on-backdrop":!1},{icon:z(()=>[...o[17]||(o[17]=[e("div",{class:"text-purple-500"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])],-1)])]),default:z(()=>{var c,p,b;return[e("div",Gt,[e("div",Yt,[e("p",qt,[o[18]||(o[18]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1)),T(" "+M((c=d.value)==null?void 0:c.folderName),1)]),e("p",Qt," 包含 "+M(((b=(p=d.value)==null?void 0:p.links)==null?void 0:b.length)||0)+" 个链接 ",1)]),o[19]||(o[19]=e("p",{class:"text-slate-600 text-sm"}," 是否将该文件夹及其包含的链接保存到您的本地历史记录中？ ",-1))])]}),_:1},8,["visible"]),V(P,{visible:g.value,"onUpdate:visible":o[6]||(o[6]=c=>g.value=c),title:"检测到未处理的链接",type:"primary","confirm-text":"填入","cancel-text":"忽略",onConfirm:L,onCancel:A},{icon:z(()=>[...o[20]||(o[20]=[e("div",{class:"text-blue-500"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})])],-1)])]),default:z(()=>[e("div",Wt,[o[21]||(o[21]=e("p",{class:"text-slate-600 text-sm"}," 在剪贴板中检测到包含 UUID 的内容，是否自动填入并清空当前内容？ ",-1)),e("div",Xt,M($.value),1)])]),_:1},8,["visible"])]))}},mo=ye(Zt,[["__scopeId","data-v-28ba7ae0"]]);export{mo as default};
